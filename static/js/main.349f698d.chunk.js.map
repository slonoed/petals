{"version":3,"sources":["rating.js","die.js","number.js","App.js","reportWebVitals.js","index.js"],"names":["Rating","current","max","stars","i","sym","push","style","fontSize","color","Die","number","die","useRef","useEffect","classList","toggle","dataset","roll","ref","className","data-roll","id","data-side","min","cellSize","minmaxPos","n","Math","NumberSelector","onChange","nums","prevX","useState","position","setPosition","moving","setMoving","handler","event","preventDefault","touch","touches","diff","clientX","pos","document","addEventListener","passive","removeEventListener","round","num","Number","isInteger","onTouchStart","onTouchEnd","transform","initialState","screen","points","dices","checkState","rnd","random","reducer","state","action","type","value","length","isCorrect","calcCorrect","App","useReducer","dispatch","run","params","target","setTimeout","b","querySelectorAll","forEach","click","rollAll","Button","size","onClick","map","d","Alert","variant","display","gridGap","gridTemplateColumns","disabled","reduce","acc","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.349f698d.chunk.js","sourcesContent":["export default function Rating({ current, max }) {\n  const stars = [];\n\n  for (let i = 0; i < max; i++) {\n    const sym = i < current ? \"★\" : \"☆\";\n    stars.push(<span key={i}>{sym}</span>);\n  }\n\n  return (\n    <div\n      style={{\n        fontSize: \"40px\",\n        color: \"hsl(36deg 100% 56%)\",\n      }}\n    >\n      {stars}\n    </div>\n  );\n}\n","import { useRef, useEffect } from \"react\";\n\nfunction getRandomNumber(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport default function Die({ number }) {\n  const die = useRef(null);\n\n  useEffect(() => {\n    die.current.classList.toggle(\"odd-roll\");\n    die.current.classList.toggle(\"even-roll\");\n    die.current.dataset.roll = number;\n  }, [number]);\n\n  return (\n    <ol ref={die} className=\"die-list even-roll\" data-roll=\"1\" id=\"die-1\">\n      <li className=\"die-item\" data-side=\"1\">\n        <span className=\"dot\"></span>\n      </li>\n      <li className=\"die-item\" data-side=\"2\">\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n      </li>\n      <li className=\"die-item\" data-side=\"3\">\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n      </li>\n      <li className=\"die-item\" data-side=\"4\">\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n      </li>\n      <li className=\"die-item\" data-side=\"5\">\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n      </li>\n      <li className=\"die-item\" data-side=\"6\">\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n        <span className=\"dot\"></span>\n      </li>\n    </ol>\n  );\n}\n","import { useState, useEffect, useRef } from \"react\";\nimport \"./number.css\";\n\nconst cellSize = 50;\nconst maxPos = cellSize * 2.5;\nconst minPos = -cellSize * 16.5;\n\nconst minmax = (min, max) => (n) => Math.max(min, Math.min(max, n));\n\nconst minmaxPos = minmax(minPos, maxPos);\n\nexport default function NumberSelector({ onChange }) {\n  const nums = [];\n  for (var i = 0, len = 20; i < len; i++) {\n    nums.push(<div className=\"num\">{i * 2}</div>);\n  }\n\n  const prevX = useRef(null);\n\n  const [position, setPosition] = useState(cellSize * 3);\n  const [moving, setMoving] = useState(false);\n\n  const onTouchStart = () => {\n    setMoving(true);\n  };\n  const onTouchEnd = () => {\n    setMoving(false);\n  };\n\n  useEffect(() => {\n    if (moving) {\n      const handler = (event) => {\n        event.preventDefault();\n        const touch = event.touches[0];\n        if (typeof prevX.current !== \"number\") {\n          prevX.current = touch.clientX;\n          return;\n        }\n\n        const diff = touch.clientX - prevX.current;\n        prevX.current = touch.clientX;\n\n        setPosition((pos) => minmaxPos(pos + diff));\n      };\n      document.addEventListener(\"touchmove\", handler, { passive: false });\n      return () => {\n        prevX.current = null;\n        document.removeEventListener(\"touchmove\", handler);\n      };\n    }\n\n    setPosition(\n      (position) =>\n        minmaxPos(\n          (Math.round((position + cellSize / 2) / cellSize) - 0.5) * cellSize\n        )\n      //                        get current cell     conv to px     move to cell center\n    );\n  }, [moving]);\n\n  useEffect(() => {\n    if (!moving) {\n      const num = ((maxPos - position) / cellSize) * 2;\n      if (Number.isInteger(num)) {\n        onChange(num);\n      }\n    }\n  }, [position, moving]);\n\n  return (\n    <div className=\"number\" onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>\n      <div\n        style={{ transform: `translate(${position}px, 0px)` }}\n        className=\"ninternal\"\n      >\n        {nums}\n      </div>\n      <div className=\"nframe\"></div>\n    </div>\n  );\n}\n","import { useReducer, useEffect } from \"react\";\nimport Button from \"react-bootstrap/Button\";\nimport Alert from \"react-bootstrap/Alert\";\nimport Dice from \"react-dice-roll\";\nimport \"./App.css\";\nimport \"./dices.css\";\nimport Rating from \"./rating\";\nimport Die from \"./die\";\nimport NumberSelector from \"./number\";\n\nconst pointsToWin = 7;\n\nconst initialState = {\n  screen: \"game\", // intro\n  points: 0,\n  dices: [],\n  num: 0,\n  checkState: \"none\",\n};\n\nfunction rnd() {\n  return Math.round(Math.random() * 5 + 1);\n}\n\nfunction reducer(state, action) {\n  if (action.type === \"again\") {\n    return {\n      ...initialState,\n      screen: \"game\",\n    };\n  }\n\n  if (action.type === \"start\") {\n    return {\n      ...state,\n      screen: \"game\",\n    };\n  }\n\n  if (action.type === \"numChange\") {\n    return {\n      ...state,\n      num: action.value,\n    };\n  }\n\n  if (action.type === \"check\") {\n    if (state.checkState !== \"none\" || state.dices.length === 0) {\n      return state;\n    }\n    const correct = calcCorrect(state);\n\n    const isCorrect = correct === state.num;\n    const points = isCorrect ? state.points + 1 : 0;\n\n    if (points === pointsToWin) {\n      return {\n        ...state,\n        screen: \"win\",\n      };\n    }\n\n    return {\n      ...state,\n      points,\n      checkState: isCorrect ? \"correct\" : \"incorrect\",\n    };\n  }\n\n  if (action.type === \"roll\") {\n    return {\n      ...state,\n      dices: [rnd(), rnd(), rnd(), rnd(), rnd()],\n      checkState: \"none\",\n    };\n  }\n\n  return state;\n}\n\nfunction App() {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const run = (type, params = {}) => (event) =>\n    dispatch({ ...params, type, value: event.target.value });\n\n  useEffect(() => {\n    const rollAll = (event) => {\n      const b = document.querySelectorAll(\"button._space3d\");\n      const z = [...b];\n      z.forEach((b) => {\n        b.click();\n      });\n    };\n\n    setTimeout(() => {\n      rollAll();\n    }, 30);\n  }, [state.dices]);\n\n  if (state.screen === \"intro\") {\n    return (\n      <div className=\"App\">\n        <div>\n          <h2>Petals around roses</h2>\n          <Button size=\"lg\" onClick={() => dispatch({ type: \"start\" })}>\n            Start game\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.screen === \"win\") {\n    return (\n      <div className=\"App\">\n        <div>\n          <h2>You won!</h2>\n          <b>You know the secret now!</b>\n          <br />\n          <br />\n          <Button onClick={() => dispatch({ type: \"again\" })}>\n            Play again\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App App_game\">\n      <Rating max={pointsToWin} current={state.points} />\n\n      <div className=\"dices\">\n        {state.dices.map((d, i) => (\n          <div key={i} className={\"dice-\" + i}>\n            <Die number={d} />\n          </div>\n        ))}\n      </div>\n\n      <div className=\"check-state\">\n        {state.checkState === \"correct\" ? (\n          <Alert variant=\"success\">Correct</Alert>\n        ) : null}\n        {state.checkState === \"incorrect\" ? (\n          <Alert variant=\"danger\">\n            Incorrect! Correct number is {calcCorrect(state)}\n          </Alert>\n        ) : null}\n      </div>\n\n      <div>\n        <br />\n        <NumberSelector\n          onChange={(value) => dispatch({ type: \"numChange\", value })}\n        />\n        <br />\n        <div\n          style={{\n            display: \"grid\",\n            gridGap: \"1em\",\n            gridTemplateColumns: \"1fr\",\n          }}\n        >\n          {state.checkState !== \"none\" || state.dices.length === 0 ? (\n            <Button onClick={run(\"roll\")} variant=\"success\">\n              Roll\n            </Button>\n          ) : (\n            <Button\n              onClick={run(\"check\")}\n              disabled={state.checkState !== \"none\" || state.dices.length === 0}\n            >\n              Check\n            </Button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n\nfunction calcCorrect(state) {\n  const correct = state.dices.reduce((acc, d) => {\n    let n = 0;\n    if (d === 3) {\n      n = 2;\n    }\n    if (d === 5) {\n      n = 4;\n    }\n    return acc + n;\n  }, 0);\n\n  return correct;\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}